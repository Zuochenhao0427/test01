theme_bw()+
theme(text = element_text(family='Kai'))
p
p = ggplot(dt)+
geom_density(aes(`1`, fill='CTA7号'), alpha=0.3)+
geom_density(aes(`2`, fill='睿丰'), alpha=0.5)+
geom_density(aes(`3`, fill='量化一号'), alpha=0.3)+
xlab(" ")+
xlim(-5, 10)+
ylim(0, 0.25)+
scale_fill_manual(name="基金",values=cols)+
theme_bw()+
theme(text = element_text(family='Kai'))
p
p = ggplot(dt)+
geom_density(aes(`1`, fill='CTA7号'), alpha=0.3)+
geom_density(aes(`2`, fill='睿丰'), alpha=0.5)+
geom_density(aes(`3`, fill='量化一号'), alpha=0.3)+
xlab(" ")+
xlim(-5, 10)+
ylim(0, 0.25)+
scale_fill_manual(name="基金简称",values=cols)+
theme_bw()+
theme(text = element_text(family='Kai'))
p
p = ggplot(dt)+
geom_density(aes(`1`, fill='CTA7号'), alpha=0.3)+
geom_density(aes(`2`, fill='睿丰'), alpha=0.5)+
geom_density(aes(`3`, fill='量化一号'), alpha=0.3)+
xlab(" ")+
ylab('分布密度')+
xlim(-5, 10)+
ylim(0, 0.25)+
scale_fill_manual(name="基金简称",values=cols)+
theme_bw()+
theme(text = element_text(family='Kai'))
p
p = ggplot(dt)+
geom_density(aes(`1`, fill='CTA7号'), alpha=0.3)+
geom_density(aes(`2`, fill='睿丰'), alpha=0.5)+
geom_density(aes(`3`, fill='量化一号'), alpha=0.3)+
xlab("夏普值")+
ylab('分布密度')+
xlim(-5, 10)+
ylim(0, 0.25)+
scale_fill_manual(name="基金简称",values=cols)+
theme_bw()+
theme(text = element_text(family='Kai'))
p
p = ggplot(dt)+
geom_density(aes(`1`, fill='CTA7号'), alpha=0.3)+
geom_density(aes(`2`, fill='睿丰'), alpha=0.5)+
geom_density(aes(`3`, fill='量化一号'), alpha=0.3)+
labs(x='夏普值', y='分布密度',title = '产品季度滚动夏普比率分布情况')+
xlim(-5, 10)+
ylim(0, 0.25)+
scale_fill_manual(name="基金简称",values=cols)+
theme_bw()+
theme(text = element_text(family='Kai'))
p
summary(dt)
p = ggplot(dt)+
geom_density(aes(`1`, fill='CTA7号'), alpha=0.3)+
geom_density(aes(`2`, fill='睿丰'), alpha=0.5)+
geom_density(aes(`3`, fill='量化一号'), alpha=0.3)+
labs(x='夏普值', y='分布密度',title = '产品季度滚动夏普比率分布情况')+
xlim(-5, 10)+
ylim(0, 0.25)+
scale_fill_manual(name="基金简称",values=cols)+
theme_bw()+
theme(text = element_text(family='SimHei'))
p
p = ggplot(dt)+
geom_density(aes(`1`, fill='CTA7号'), alpha=0.3)+
geom_density(aes(`2`, fill='睿丰'), alpha=0.5)+
geom_density(aes(`3`, fill='量化一号'), alpha=0.3)+
labs(x='夏普比率', y='分布密度',title = '产品季度滚动夏普比率分布情况')+
xlim(-5, 10)+
ylim(0, 0.25)+
scale_fill_manual(name="基金简称",values=cols)+
theme_bw()+
theme(text = element_text(family='SimHei',size=12))
p
p = ggplot(dt)+
geom_density(aes(`1`, fill='CTA7号'), alpha=0.3)+
geom_density(aes(`2`, fill='睿丰'), alpha=0.5)+
geom_density(aes(`3`, fill='量化一号'), alpha=0.3)+
labs(x='夏普比率', y='分布密度',title = '产品季度滚动夏普比率分布情况')+
xlim(-5, 10)+
ylim(0, 0.25)+
scale_fill_manual(name="基金简称",values=cols)+
theme_bw()+
theme(text = element_text(family='SimHei',size=11))
p
p = ggplot(dt)+
geom_density(aes(`1`, fill='CTA7号'), alpha=0.3)+
geom_density(aes(`2`, fill='睿丰'), alpha=0.5)+
geom_density(aes(`3`, fill='量化一号'), alpha=0.3)+
labs(x='夏普比率', y='分布密度',title = '产品季度滚动夏普比率分布情况')+
xlim(-5, 10)+
ylim(0, 0.25)+
scale_fill_manual(name="基金简称",values=cols)+
theme_bw()+
theme(text = element_text(family='SimHei',size=10))
p
p = ggplot(dt)+
geom_density(aes(`1`, fill='CTA7号'), alpha=0.3)+
geom_density(aes(`2`, fill='睿丰'), alpha=0.5)+
geom_density(aes(`3`, fill='量化一号'), alpha=0.3)+
labs(x='夏普比率', y='分布密度',title = '产品季度滚动夏普比率分布情况')+
xlim(-5, 10)+
ylim(0, 0.25)+
scale_fill_manual(name="基金简称",values=cols)+
theme_hc()+
theme(text = element_text(family='SimHei',size=10))
p
p = ggplot(dt)+
geom_density(aes(`1`, fill='CTA7号'), alpha=0.3)+
geom_density(aes(`2`, fill='睿丰'), alpha=0.5)+
geom_density(aes(`3`, fill='量化一号'), alpha=0.3)+
labs(x='夏普比率', y='分布密度')+
xlim(-5, 10)+
ylim(0, 0.25)+
scale_fill_manual(values=cols)+
theme_hc()+
theme(text = element_text(family='SimHei',size=10))
p
p = ggplot(dt)+
geom_density(aes(`1`, fill='CTA7号'), alpha=0.2)+
geom_density(aes(`2`, fill='睿丰'), alpha=0.2)+
geom_density(aes(`3`, fill='量化一号'), alpha=0.2)+
labs(x='夏普比率', y='分布密度')+
xlim(-5, 10)+
ylim(0, 0.25)+
scale_fill_manual(values=cols)+
theme_hc()+
theme(text = element_text(family='SimHei',size=10))
p
p = ggplot(dt)+
geom_density(aes(`1`, fill='CTA7号', color='#6699FF'), alpha=0.2)+
geom_density(aes(`2`, fill='睿丰'), alpha=0.2)+
geom_density(aes(`3`, fill='量化一号'), alpha=0.2)+
labs(x='夏普比率', y='分布密度')+
xlim(-5, 10)+
ylim(0, 0.25)+
scale_fill_manual(values=cols)+
theme_hc()+
theme(text = element_text(family='SimHei',size=10))
p
p = ggplot(dt)+
geom_density(aes(`1`, fill='CTA7号'), alpha=0.2)+
geom_density(aes(`2`, fill='睿丰'), alpha=0.2)+
geom_density(aes(`3`, fill='量化一号'), alpha=0.2)+
labs(x='夏普比率', y='分布密度')+
xlim(-5, 10)+
ylim(0, 0.25)+
scale_fill_manual(values=cols)+
theme_hc()+
theme(text = element_text(family='SimHei',size=10))
p
p = ggplot(dt)+
geom_density(aes(`1`, fill='CTA7号'), alpha=0.2)+
geom_density(aes(`2`, fill='睿丰'), alpha=0.2)+
geom_density(aes(`3`, fill='量化一号'), alpha=0.2)+
labs(x='夏普比率', y='分布密度')+
xlim(-5, 10)+
ylim(0, 0.25)+
scale_fill_manual(name='产品名称',values=cols)+
theme_hc()+
theme(text = element_text(family='SimHei',size=10))
p
summary(dt)
p = ggplot(dt)+
geom_density(aes(`1`, fill='CTA7号'), alpha=0.3)+
geom_density(aes(`2`, fill='睿丰'), alpha=0.2)+
geom_density(aes(`3`, fill='量化一号'), alpha=0.2)+
labs(x='夏普比率', y='分布密度')+
xlim(-5, 10)+
ylim(0, 0.25)+
scale_fill_manual(name='产品名称',values=cols)+
theme_hc()+
theme(text = element_text(family='SimHei',size=10))
p
p = ggplot(dt)+
geom_density(aes(`1`, fill='CTA7号'), alpha=0.3)+
geom_density(aes(`2`, fill='睿丰'), alpha=0.7)+
geom_density(aes(`3`, fill='量化一号'), alpha=0.2)+
labs(x='夏普比率', y='分布密度')+
xlim(-5, 10)+
ylim(0, 0.25)+
scale_fill_manual(name='产品名称',values=cols)+
theme_hc()+
theme(text = element_text(family='SimHei',size=10))
p
p = ggplot(dt)+
geom_density(aes(`1`, fill='CTA7号'), alpha=0.3)+
geom_density(aes(`2`, fill='睿丰'), alpha=0.8)+
geom_density(aes(`3`, fill='量化一号'), alpha=0.2)+
labs(x='夏普比率', y='分布密度')+
xlim(-5, 10)+
ylim(0, 0.25)+
scale_fill_manual(name='产品名称',values=cols)+
theme_hc()+
theme(text = element_text(family='SimHei',size=10))
p
p = ggplot(dt)+
geom_density(aes(`1`, fill='CTA7号'), color='#6699FF',alpha=0.3)+
geom_density(aes(`2`, fill='睿丰'), color='#CCCCCC',alpha=0.8)+
geom_density(aes(`3`, fill='量化一号'), color='#FFCC00',alpha=0.2)+
labs(x='夏普比率', y='分布密度')+
xlim(-5, 10)+
ylim(0, 0.25)+
scale_fill_manual(name='产品名称',values=cols)+
theme_hc()+
theme(text = element_text(family='SimHei',size=10))
p
cols=c('CTA7号'='#6699FF', '睿丰'="#CCCCCC", '量化一号'="#FFCC00")
p = ggplot(dt)+
geom_density(aes(`1`, fill='CTA7号'), alpha=0.3)+
geom_density(aes(`2`, fill='睿丰'), alpha=0.8)+
geom_density(aes(`3`, fill='量化一号'), alpha=0.2)+
labs(x='夏普比率', y='分布密度')+
xlim(-5, 10)+
ylim(0, 0.25)+
scale_fill_manual(name='产品名称',values=cols)+
theme_hc()+
theme(text = element_text(family='SimHei',size=10))
p
p = ggplot(dt)+
geom_density(aes(`1`, fill='CTA7号'), alpha=0.3)+
geom_density(aes(`2`, fill='睿丰'), alpha=0.8)+
geom_density(aes(`3`, fill='量化一号'), alpha=0.2)+
labs(x='夏普比率', y='分布密度')+
xlim(-5, 10)+
ylim(0, 0.25)+
scale_fill_manual(name='产品名称',values=cols)+
theme_hc()+
theme(text = element_text(family='SimHei',size=10),legend.position = 'right')
p
p = ggplot(dt)+
geom_density(aes(`1`, fill='CTA7号'), alpha=0.3)+
geom_density(aes(`2`, fill='睿丰'), alpha=0.8)+
geom_density(aes(`3`, fill='量化一号'), alpha=0.2)+
labs(x='夏普比率', y='分布密度')+
xlim(-5, 10)+
ylim(0, 0.25)+
scale_fill_manual(name='产品名称',values=cols)+
theme_hc()+
theme(text = element_text(family='SimHei',size=5),legend.position = 'right')
p
p = ggplot(dt)+
geom_density(aes(`1`, fill='CTA7号'), alpha=0.3)+
geom_density(aes(`2`, fill='睿丰'), alpha=0.8)+
geom_density(aes(`3`, fill='量化一号'), alpha=0.2)+
labs(x='夏普比率', y='分布密度')+
xlim(-5, 10)+
ylim(0, 0.25)+
scale_fill_manual(name='产品名称',values=cols)+
theme_hc()+
theme(text = element_text(family='SimHei',size=10),legend.position = 'right')
p
p = ggplot(dt)+
geom_density(aes(`1`, fill='CTA7号'), alpha=0.3)+
geom_density(aes(`2`, fill='睿丰'), alpha=0.8)+
geom_density(aes(`3`, fill='量化一号'), alpha=0.2)+
labs(x='夏普比率', y='分布密度')+
xlim(-5, 10)+
ylim(0, 0.25)+
scale_fill_manual(name='产品名称',values=cols)+
theme_hc()+
theme(text = element_text(family='SimHei',size=9),legend.position = 'right')
p
library(ggthemes)
library(tidyverse)
dt = read_csv('Desktop/量金季度滚动夏普.csv')
dt_longer = tidyr::pivot_longer(dt, c(`1`,`2`,`3`))
dt_longer %>% mutate(name = as.character(name)) -> dt_longer
cols=c('CTA7号'='#6699FF', '睿丰'="#CCCCCC", '量化一号'="#FFCC00")
p = ggplot(dt)+
geom_density(aes(`1`, fill='CTA7号'), alpha=0.3)+
geom_density(aes(`2`, fill='睿丰'), alpha=0.8)+
geom_density(aes(`3`, fill='量化一号'), alpha=0.2)+
labs(x='夏普比率', y='分布密度')+
xlim(-5, 10)+
ylim(0, 0.25)+
scale_fill_manual(name='产品名称',values=cols)+
theme_hc()+
theme(text = element_text(family='SimHei',size=9),legend.position = 'right')
p
summary(dt)
colSums(dt)
colSums(dt$`1`)
colSums(dt)
View(dt_longer)
summary(dt_longer)
library(tidyverse)
library(ggthemes)
dt = read_csv('Desktop/量金-周收益率.csv')
summary(dt)
dt = read_csv('Desktop/量金-周收益率.csv')
summary(dt)
cols=c('CTA7号'='#6699FF', '睿丰'="#CCCCCC", '量化一号'="#FFCC00")
p1 = ggplot(dt)+
geom_density(aes(`1`, fill='CTA7号'), alpha=0.3)+
geom_density(aes(`2`, fill='睿丰'), alpha=0.8)+
geom_density(aes(`3`, fill='量化一号'), alpha=0.2)
p1
library(ggthemes)
cols=c('CTA7号'='#6699FF', '睿丰'="#CCCCCC", '量化一号'="#FFCC00")
p1 = ggplot(dt)+
geom_density(aes(`1`, fill='CTA7号'), alpha=0.3)+
geom_density(aes(`2`, fill='睿丰'), alpha=0.8)+
geom_density(aes(`3`, fill='量化一号'), alpha=0.2)
p1
p1 = ggplot(dt)+
geom_density(aes(`1`, fill='CTA7号'), alpha=0.3)+
geom_density(aes(`2`, fill='睿丰'), alpha=0.8)+
geom_density(aes(`3`, fill='量化一号'), alpha=0.2)+
xlim(-5, 10)+
ylim(0, 0.25)+
scale_fill_manual(name='产品名称',values=cols)+
theme_hc()+
theme(text = element_text(family='SimHei',size=9),legend.position = 'right')
p1
p1 = ggplot(dt)+
geom_density(aes(`1`, fill='CTA7号'), alpha=0.3)+
geom_density(aes(`2`, fill='睿丰'), alpha=0.8)+
geom_density(aes(`3`, fill='量化一号'), alpha=0.2)+
scale_fill_manual(name='产品名称',values=cols)+
theme_hc()+
theme(text = element_text(family='SimHei',size=9),legend.position = 'right')
p1
summary(dt)
p1 = ggplot(dt)+
geom_histogram(aes(`1`, fill='CTA7号'), alpha=0.3)+
geom_histogram(aes(`2`, fill='睿丰'), alpha=0.8)+
geom_histogram(aes(`3`, fill='量化一号'), alpha=0.2)+
scale_fill_manual(name='产品名称',values=cols)+
theme_hc()+
theme(text = element_text(family='SimHei',size=9),legend.position = 'right')
p1
p1 = ggplot(dt)+
geom_density(aes(`1`, fill='CTA7号'), alpha=0.3)+
geom_density(aes(`2`, fill='睿丰'), alpha=0.8)+
geom_density(aes(`3`, fill='量化一号'), alpha=0.2)+
scale_fill_manual(name='产品名称',values=cols)+
theme_hc()+
theme(text = element_text(family='SimHei',size=9),legend.position = 'right')
p1
library(tidyverse)
library(tidyverse)
dt = read.csv('Desktop/大禾产品数缩小.csv')
dim(dt)
dt = read.csv('Desktop/大禾产品数缩小.csv')
dim(dt)
glimpse(dt)
library(tidyverse)
ggplot(dt)+
geom_histogram(aes(`产品规模.万元.`))
ggplot(dt)+
geom_histogram(aes(`产品规模.万元.`))+
theme(text = element_text(family='SimHei'))
ggplot(dt)+
geom_histogram(aes(`产品规模.万元.`),binwidth=2e+04)+
theme(text = element_text(family='SimHei'))
ggplot(dt)+
geom_histogram(aes(`产品规模.万元.`),binwidth=1e+04)+
theme(text = element_text(family='SimHei'))
ggplot(dt)+
geom_histogram(aes(`产品规模.万元.`),binwidth=1e+04)+
theme(text = element_text(family='SimHei'))+
geom_text(aes(label=as.character(`产品规模.万元.`)),stat="count",vjust=-0.5)
ggplot(dt)+
geom_histogram(aes(`产品规模.万元.`),binwidth=1e+04)+
theme(text = element_text(family='SimHei'))+
geom_text(aes(label=as.character(..count..)),stat="count",vjust=-0.5)
ggplot(dt)+
geom_histogram(aes(`产品规模.万元.`),binwidth=1e+04)+
theme(text = element_text(family='SimHei'))+
geom_text(aes(label=`产品规模.万元.`,stat="count",vjust=-0.5)
ggplot(dt)+
geom_histogram(aes(`产品规模.万元.`),binwidth=1e+04)+
theme(text = element_text(family='SimHei'))+
geom_text(aes(label=`产品规模.万元.`,stat="count",vjust=-0.5))
ggplot(dt)+
geom_histogram(aes(`产品规模.万元.`),binwidth=1e+04,)+
theme(text = element_text(family='SimHei'))
ggplot(dt)+
geom_histogram(aes(`产品规模.万元.`),binwidth=1e+04,breaks=seq(0,130000,10000),xlim(0,130000))+
theme(text = element_text(family='SimHei'))
ggplot(dt)+
geom_histogram(aes(`产品规模.万元.`),binwidth=1e+04,breaks=seq(0,130000,10000))+
theme(text = element_text(family='SimHei'))
ggplot(dt)+
geom_histogram(aes(`产品规模.万元.`),binwidth=1e+04,breaks=seq(0,130000,10000))+
theme(text = element_text(family='SimHei'))
ggplot(dt)+
geom_histogram(aes(`产品规模.万元.`),binwidth=5000,breaks=seq(0,130000,10000))+
theme(text = element_text(family='SimHei'))
ggplot(dt)+
geom_histogram(aes(`产品规模.万元.`),binwidth=5000,breaks=seq(0,130000,5000))+
theme(text = element_text(family='SimHei'))
ggplot(dt)+
geom_histogram(aes(`产品规模.万元.`),binwidth=1000,breaks=seq(0,130000,1000))+
theme(text = element_text(family='SimHei'))
ggplot(dt)+
geom_histogram(aes(`产品规模.万元.`),binwidth=1000)+
theme(text = element_text(family='SimHei'))
ggplot(dt)+
geom_density(aes(`产品规模.万元.`))+
theme(text = element_text(family='SimHei'))
ggplot(dt)+
geom_density(aes(`产品规模.万元.`))+
theme_hc()+
theme(text = element_text(family='SimHei'))
ggplot(dt)+
geom_density(aes(`产品规模.万元.`))+
labs(x='产品规模', y='分布密度')+
theme_hc()+
theme(text = element_text(family='SimHei'))
cols=c('CTA7号'='#6699FF', '睿丰'="#CCCCCC", '量化一号'="#FFCC00")
p1 = ggplot(dt)+
geom_density(aes(`1`, fill='CTA7号'), alpha=0.3)+
geom_density(aes(`2`, fill='睿丰'), alpha=0.8)+
geom_density(aes(`3`, fill='量化一号'), alpha=0.2)+
scale_fill_manual(name='产品名称',values=cols)+
theme_hc()+
theme(text = element_text(family='SimHei',size=9),legend.position = 'right')
p1
dt = read_csv('Desktop/量金-周收益率.csv')
summary(dt)
cols=c('CTA7号'='#6699FF', '睿丰'="#CCCCCC", '量化一号'="#FFCC00")
p1 = ggplot(dt)+
geom_density(aes(`1`, fill='CTA7号'), alpha=0.3)+
geom_density(aes(`2`, fill='睿丰'), alpha=0.8)+
geom_density(aes(`3`, fill='量化一号'), alpha=0.2)+
scale_fill_manual(name='产品名称',values=cols)+
theme_hc()+
theme(text = element_text(family='SimHei',size=9),legend.position = 'right')
p1
summary(dt)
p1
cols=c('CTA7号'='#6699FF', '睿丰'="#CCCCCC", '量化一号'="#FFCC00")
p1 = ggplot(dt)+
geom_density(aes(`1`, fill='CTA7号'), alpha=0.3)+
geom_density(aes(`2`, fill='睿丰'), alpha=0.8)+
geom_density(aes(`3`, fill='量化一号'), alpha=0.2)+
scale_fill_manual(name='产品名称',values=cols)+
labs(x='周收益率', y='分布密度')+
theme_hc()+
theme(text = element_text(family='SimHei',size=9),legend.position = 'right')
p1
setwd("~/Desktop/2021.6 - 量化项目")
df=read_csv('数据已合并.csv') # 原始数据73616个数据点
library(tidyverse)
library(plotly)
library(stringr)
library(lubridate)
df=read_csv('数据已合并.csv') # 原始数据73616个数据点
## 单个代码对应单支基金？N, 独立基金(拥有独立代码的)一共有623个，554个简称中有69个简称对应2个代码。
df %>% select(`代码`,`简称`) %>% unique() %>% nrow() # 623
df %>% select(`代码`) %>% unique() %>% nrow() # 623
df %>% select(`简称`) %>% unique() %>% nrow() # 554
df %>% select(`代码`,`简称`) %>% unique() %>% ungroup() %>%
group_by(`简称`) %>% count() %>% filter(n!=1) %>% nrow() # 69
#######################################
########### Before NA remove ##########
#######################################
## 一共有几支基金？按单独代码计算，一共有623支基金。
## 单支基金对应多少个数据点(未dropna以前)？有334支基金数据点少于50个，其中304支基金数据点不足10个。
df %>% group_by(`代码`) %>% count() -> plt1
ggplot(plt1) +
geom_histogram(aes(`n`), binwidth = 10) -> p1
ggplotly(p1)
## drop na '--' ---> 以单位净值为sample
df$`周单位净值(元)` = ifelse(df$`周单位净值(元)`=="--", NA, df$`周单位净值(元)`)
df %>% select(c(1:3), 7) %>% na.omit() -> df1 # 去掉NA一共68000+数据点
#######################################
########### After NA remove ###########
#######################################
## 一共有几支基金？一共328支基金。
df1 %>% select(`代码`) %>% unique() %>% nrow() # 328
View(df1)
## drop na '--' ---> 以单位净值为sample
df$`周单位净值(元)` = ifelse(df$`周单位净值(元)`=="--", NA, df$`周单位净值(元)`)
View(df)
df %>% select(c(1:3), 6) %>% na.omit() -> df1 # 去掉NA一共68000+数据点
#######################################
########### After NA remove ###########
#######################################
## 一共有几支基金？一共328支基金。
df1 %>% select(`代码`) %>% unique() %>% nrow() # 328
## 单支基金对应多少个数据点？有85%的基金单支拥有50 ~ 400个数据点, 其中有25.8%的基金单支拥有200~250个数据点。
df1 %>% group_by(`代码`) %>% count() -> plt2
ggplot(plt2) +
geom_histogram(aes(`n`), binwidth = 50) -> p2
ggplotly(p2)
## 每年有多少个数据点？由04年至18年，数据点数量由最初的1个至15674个逐年增多。
df1 %>% mutate(年份=year(时间)) -> df_year
df_year %>% group_by(年份) %>% count() -> plt3
ggplot(plt3) +
geom_line(aes(x=`年份`, y=`n`)) -> p3
ggplotly(p3)
## 每年统计多少支基金？由04年至18年，基金数量由最初的1支至328支逐年增多，13年基金数量超过100支，14年后基金数量猛增。
df_year %>% select(年份, 代码) %>% unique() %>% group_by(年份) %>% count() -> plt4
ggplot(plt4) +
geom_line(aes(x=`年份`, y=`n`)) -> p4
ggplotly(p4)
# 导出数据
write_csv(df1, '数据已清理.csv')
View(df1)
setwd("~/Desktop/2021.6 - 量化项目/test01")
